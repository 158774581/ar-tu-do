\href{https://travis-ci.com/Autonomous-Racing-PG/ar-tu-do}{\tt }

This repository contains software for 1/10th scale autonomous race cars to compete in the \href{http://f1tenth.org/}{\tt F1/10 competition}. It is developed by the Autonomous Racing Project Group of \href{https://ls12-www.cs.tu-dortmund.de/daes/}{\tt TU Dortmund}.



\subsection*{Features}

We provide several L\+I\+D\+AR based driving algorithms\+:


\begin{DoxyItemize}
\item Fast and efficient wallfollowing based on fitting circles into the L\+I\+D\+AR scan
\item \href{http://wiki.ros.org/navigation}{\tt R\+OS navigation stack} based implementation that uses S\+L\+AM, a precalculated map and path planning
\item Deep Reinforcement Learning (\href{https://en.wikipedia.org/wiki/Q-learning}{\tt Q-\/\+Learning} and \href{https://en.wikipedia.org/wiki/Reinforcement_learning#Direct_policy_search}{\tt Policy Gradient})
\item Neural Networks with evolutionary training
\end{DoxyItemize}

Our software works on physical hardware and in a simulated environment using \href{http://gazebosim.org/}{\tt Gazebo}. Further features are\+:


\begin{DoxyItemize}
\item Automatic emergency braking
\item Dead Man\textquotesingle{}s Switch
\item Teleoperation via keyboard, Xbox and Playstation controller
\item Speedometer and Lap Timer
\end{DoxyItemize}

\subsection*{Installation}

You need to install the \href{https://www.ros.org/}{\tt Robot Operating System (R\+OS)} to use our software. We target \href{http://wiki.ros.org/kinetic/Installation}{\tt R\+OS Kinetic} on Ubuntu 16.\+04, but \href{http://wiki.ros.org/melodic/Installation}{\tt R\+OS Melodic} seems to work as well.

Note for VM users\+: Gazebo 7.\+0.\+0, which is installed with R\+OS Kinetic by default, \href{https://bitbucket.org/osrf/gazebo/issues/1837/vmware-rendering-z-ordering-appears-random}{\tt does not work} on a virtual machine. To solve this, Gazebo has to be updated to at least 7.\+4.\+0 \href{http://gazebosim.org/tutorials?cat=install&tut=install_ubuntu&ver=7.0#Alternativeinstallation:step-by-step}{\tt as explained here}.

Install dependencies\+:


\begin{DoxyCode}
1 sudo pip uninstall pip && sudo apt install python-pip
2 sudo apt install libsdl2-dev clang-format python-pyqtgraph
3 pip install torch autopep8 cython circle-fit
4 
5 # RangeLibc
6 git clone http://github.com/kctess5/range\_libc
7 cd range\_libc/pywrapper
8 # Either:
9 ./compile.sh            # on VM
10 # Or:
11 ./compile\_with\_cuda.sh  # on car - compiles GPU ray casting methods
\end{DoxyCode}


Clone the repository\+:


\begin{DoxyCode}
1 git clone --recurse-submodules https://github.com/Autonomous-Racing-PG/ar-tu-do.git
\end{DoxyCode}


Install missing R\+OS dependencies\+:


\begin{DoxyCode}
1 cd ar-tu-do/ros\_ws
2 rosdep install -y --from-paths src --ignore-src --rosdistro $\{ROS\_DISTRO\}
\end{DoxyCode}


\subsection*{Usage}

Compile while inside the {\ttfamily ros\+\_\+ws}directory\+:


\begin{DoxyCode}
1 catkin\_make
\end{DoxyCode}


Set up enviroment variables for your shell\+:


\begin{DoxyCode}
1 source devel/setup.bash # (or setup.zsh, depending on your shell)
\end{DoxyCode}


Use a launch file to start R\+OS and Gazebo\+:


\begin{DoxyCode}
1 roslaunch launch/car.launch                   # (Physical car, Wallfollowing)
2 roslaunch launch/car\_navigation\_stack.launch  # (Physical car, SLAM & ROS navigation)
3 roslaunch launch/gazebo.launch                # (Simulation, Wallfollowing)
4 roslaunch launch/navigation\_stack.launch      # (Simulation, SLAM & ROS navigation)
5 roslaunch launch/q\_learning.launch            # (Simulation, Train the Q-Learning model)
6 roslaunch launch/policy\_gradient.launch       # (Simulation, Train the Policy Gradient model)
7 roslaunch launch/evolutionary.launch          # (Simulation, Train the evolutionary neural network)
\end{DoxyCode}


\subsubsection*{Launch file arguments}

These arguments can be passed to the launch files above. For example, to use the {\ttfamily gazebo.\+launch} file without emergency stop and with car highlighting, run\+: 
\begin{DoxyCode}
1 roslaunch launch/gazebo.launch emergency\_stop:=false car\_highlighting:=true
\end{DoxyCode}
 The arguments can be changed permanently by editing the launch files.

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*7{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\multirow{2}{\linewidth}{{\bf Argument }}&\multirow{2}{\linewidth}{{\bf Description }}&\multicolumn{5}{p{(\linewidth-\tabcolsep*7-\arrayrulewidth*3)*5/7}|}{\cellcolor{\tableheadbgcolor}{\bf Supported by {\ttfamily launch/$<$file$>$.launch}  }}\\\cline{3-7}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}&&\multirow{2}{\linewidth}{{\bf Argument }}&\multirow{2}{\linewidth}{{\bf Description }}&\multicolumn{5}{p{(\linewidth-\tabcolsep*7-\arrayrulewidth*3)*5/7}|}{\cellcolor{\tableheadbgcolor}{\bf Supported by {\ttfamily launch/$<$file$>$.launch}  }}\\\cline{1-2}\cline{5-7}
\endhead
car &car\+\_\+navstack &&&gazebo &navigation\+\_\+stack &q\+\_\+learning, policy\+\_\+gradient, evolutionary  \\\cline{1-7}
{\ttfamily debug} &Boolean value whether Gazebo should run in debug mode. Defaults to false. &✗ &✗ &✓ &✓ &✗  \\\cline{1-7}
{\ttfamily emergency\+\_\+stop} &Boolean value whether the emergency stop should be active. Defaults to true. &✗ &✗ &✓ &✗ &✗  \\\cline{1-7}
{\ttfamily gui} &Boolean value whether Gazebo should show a user interface. Defaults to true. &✗ &✗ &✓ &✓ &✓  \\\cline{1-7}
{\ttfamily joystick\+\_\+type} &The type of joystick controller. Possible values\+: {\ttfamily ps3}, {\ttfamily xbox360} and {\ttfamily xboxone} &✓ &✓ &✓ &✓ &✗  \\\cline{1-7}
{\ttfamily map} &Name of the map to be used by the particle filter. Defaults to a prerecorded map of {\ttfamily racetrack\+\_\+decorated\+\_\+2}. &✗ &✓$<$br$>$(no default) &✗ &✓ &✗  \\\cline{1-7}
{\ttfamily paused} &Boolean value whether Gazebo should start paused. Defaults to false. &✗ &✗ &✓ &✓ &✗  \\\cline{1-7}
{\ttfamily pf\+\_\+angle\+\_\+step} &Angle step of the particle filter. Defaults to 18. &✗ &✓ &✗ &✓ &✗  \\\cline{1-7}
{\ttfamily pf\+\_\+max\+\_\+particles} &Maximum amount of particles to be used by the particle filter. Defaults to 500. &✗ &✓ &✗ &✓ &✗  \\\cline{1-7}
{\ttfamily pf\+\_\+squash\+\_\+factor} &Squash factor of the particle filter. Defaults to 2.\+2. &✗ &✓ &✗ &✓ &✗  \\\cline{1-7}
{\ttfamily plot\+\_\+window} &Integer value indicating the amount of episodes that should be plotted. Defaults to 200. &✗ &✗ &✗ &✗ &✓ / ✓ / ✗  \\\cline{1-7}
{\ttfamily realtime\+\_\+simulation} &Boolean value whether Gazebo should try to simulate with a real time factor of 1. If false, Gazebo tries to simulate as fast as possible. Defaults to true. &✗ &✗ &✗ &✗ &✓  \\\cline{1-7}
{\ttfamily use\+\_\+gpu} &Boolean value whether Gazebo should use the G\+PU when simulating the lidar. Defaults to true. &✗ &✗ &✓ &✓ &✓  \\\cline{1-7}
{\ttfamily use\+\_\+sim\+\_\+time} &Boolean value whether all ros nodes should use simulated Gazebo time instead of wall clock time. Defaults to true. &✗ &✗ &✓ &✓ &✗  \\\cline{1-7}
{\ttfamily verbose} &Boolean value whether Gazebo should give verbose standard output. Defaults to true. &✗ &✗ &✓ &✓ &✗  \\\cline{1-7}
{\ttfamily visualize\+\_\+lidar} &Boolean value whether Gazebo should show the simulated lidar rays. Defaults to false. &✗ &✗ &✓ &✓ &✗  \\\cline{1-7}
{\ttfamily world} &The name of the racetrack. Possible values\+: {\ttfamily racetrack\+\_\+decorated}, {\ttfamily racetrack\+\_\+decorated\+\_\+2} (default) and {\ttfamily racetrack\+\_\+decorated\+\_\+2\+\_\+big} &✗ &✗ &✓ &✓ &✓  \\\cline{1-7}
\end{longtabu}


\subsection*{Hardware}

Our car is based on a 1/10th scale RC car (\href{https://traxxas.com/products/models/electric/ford-fiesta-st-rally}{\tt Traxxas Ford Fiesta}) with these additions\+:


\begin{DoxyItemize}
\item C\+P\+U/\+G\+PU board (\href{https://www.nvidia.com/object/jetson-tk1-embedded-dev-kit.html}{\tt N\+V\+I\+D\+IA Jetson})
\item motor controller (\href{https://www.enertionboards.com/FOCBOX-foc-motor-speed-controller.html}{\tt F\+O\+C\+B\+OX})
\item L\+I\+D\+AR scanner (\href{https://www.hokuyo-usa.com/products/scanning-laser-rangefinders/ust-10lx}{\tt Hokuyo U\+S\+T-\/10\+LX})
\item an inertial measurement unit (\href{https://www.invensense.com/products/motion-tracking/9-axis/mpu-9250/}{\tt Invensense M\+P\+U-\/9250})
\item optional\+: brushless DC motor (replaces the standard brushed motor)
\item optional\+: stereo camera (\href{https://www.stereolabs.com/zed/}{\tt Z\+ED})
\end{DoxyItemize}

\subsection*{Documentation}


\begin{DoxyItemize}
\item For general information and documentation check out our \href{https://github.com/Autonomous-Racing-PG/ar-tu-do/wiki}{\tt wiki page}.
\item For source code documentation check out the auto-\/generated \href{https://autonomous-racing-pg.github.io/ar-tu-do/html/index.html}{\tt Doxygen documentation}.
\end{DoxyItemize}

\subsection*{License}

This project (excluding git submodules) is under M\+IT and G\+P\+Lv3 dual licensed -\/ see the \href{MIT.LICENSE}{\tt M\+I\+T.\+L\+I\+C\+E\+N\+SE} and \href{GPLv3.LICENSE}{\tt G\+P\+Lv3.\+L\+I\+C\+E\+N\+SE} file for details. 